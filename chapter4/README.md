# Evaluation strategy

## 遅延評価

`mean' xs = let (res, len) = foldl (\(m, n) x -> (m + x / len, n + 1)) (0, 0) xs in res`

### 最左最外簡約

最左最外簡約で停止しないラムダ式はどのような順でも停止しない

### WHNF 弱冠頭正規形

- weak head normal form
- これ以上、適用する値がない関数
- 式の先頭にコンストラクタが出た状態の値


## 評価戦略

与えられた式を計算し結果を得るときの計算順の決め方

reduction (簡約): `(\x -> 変数xを含むかもしれない式A) 式B` を `式A中の変数xを全て式Bに置き換えた式` に変換する規則

正規形: 式中のどの部分についても簡約にできない式

### サンク thunk

評価が行われないまま放置されている計算予定オブジェクト

グラフ簡約: 必要としている式同士の関係のグラフからキャッシュ利用を判断する

### 利点と欠点

- 積極評価
  - 現在の計算機アーキテクチャと相性がいい
  - レジスタやメモリにおいても使いやすい
  - 高速にしやすい
  - 使われないかもしれないが計算するコスト
- 遅延評価
  - 計算せずに済むベネフィット
  - 計算の定義と実行を分離できる
  - 現在の計算機アーキテクチャと相性が良くない
  - 使われないかもしれない計算予定を作るコスト
  - 作った計算予定を破棄するコスト
